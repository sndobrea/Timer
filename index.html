<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Timer</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Apple System Font Stack */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #000000;
            background-image: linear-gradient(145deg, #111111 0%, #1a1a1a 100%);
            min-height: 100vh;
            color: #f5f5f7; /* Apple text color */
        }

        /* Glassmorphism subtle specific for Dark Mode */
        .glass {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4">

    <div class="container mx-auto max-w-5xl">
        
        <!-- Title and Current Date -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight">TIME ELAPSED</h1>
            <p class="text-gray-400 text-lg font-light">
                Since: <span id="current-start-date" class="font-mono text-white font-medium">...</span>
            </p>
        </header>

        <!-- 1. Main Blocks (Breakdown) -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
            <!-- Days -->
            <div class="glass rounded-2xl p-4 md:p-6 text-center transform hover:scale-105 transition duration-300">
                <div class="text-gray-400 text-2xl md:text-3xl mb-2"><i class="fas fa-calendar-day"></i></div>
                <div id="days" class="text-3xl md:text-5xl font-bold font-mono tracking-tighter">0</div>
                <div class="text-gray-500 uppercase text-xs md:text-sm mt-2 font-semibold tracking-widest">Days</div>
            </div>

            <!-- Hours -->
            <div class="glass rounded-2xl p-4 md:p-6 text-center transform hover:scale-105 transition duration-300">
                <div class="text-gray-400 text-2xl md:text-3xl mb-2"><i class="fas fa-clock"></i></div>
                <div id="hours" class="text-3xl md:text-5xl font-bold font-mono tracking-tighter">00</div>
                <div class="text-gray-500 uppercase text-xs md:text-sm mt-2 font-semibold tracking-widest">Hours</div>
            </div>

            <!-- Minutes -->
            <div class="glass rounded-2xl p-4 md:p-6 text-center transform hover:scale-105 transition duration-300">
                <div class="text-gray-400 text-2xl md:text-3xl mb-2"><i class="fas fa-hourglass-half"></i></div>
                <div id="minutes" class="text-3xl md:text-5xl font-bold font-mono tracking-tighter">00</div>
                <div class="text-gray-500 uppercase text-xs md:text-sm mt-2 font-semibold tracking-widest">Minutes</div>
            </div>

            <!-- Seconds -->
            <div class="glass rounded-2xl p-4 md:p-6 text-center transform hover:scale-105 transition duration-300 border-b-4 border-white/20">
                <div class="text-white text-2xl md:text-3xl mb-2"><i class="fas fa-stopwatch"></i></div>
                <div id="seconds" class="text-3xl md:text-5xl font-bold font-mono tracking-tighter">00</div>
                <div class="text-gray-500 uppercase text-xs md:text-sm mt-2 font-semibold tracking-widest">Seconds</div>
            </div>
        </div>

        <!-- 2. Total Stats (Cumulative) -->
        <div class="mb-12">
            <h2 class="text-center text-sm text-gray-500 mb-6 uppercase tracking-widest border-b border-gray-800 pb-2 mx-auto max-w-xs font-semibold">Total Conversion</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                
                <div class="glass rounded-xl p-4 flex flex-col items-center justify-center">
                    <span class="text-gray-500 text-[10px] uppercase mb-1 font-bold tracking-wider">Total Days</span>
                    <span id="total-days" class="text-xl font-mono font-medium text-gray-200">0</span>
                </div>

                <div class="glass rounded-xl p-4 flex flex-col items-center justify-center">
                    <span class="text-gray-500 text-[10px] uppercase mb-1 font-bold tracking-wider">Total Hours</span>
                    <span id="total-hours" class="text-xl font-mono font-medium text-gray-200">0</span>
                </div>

                <div class="glass rounded-xl p-4 flex flex-col items-center justify-center">
                    <span class="text-gray-500 text-[10px] uppercase mb-1 font-bold tracking-wider">Total Minutes</span>
                    <span id="total-minutes" class="text-xl font-mono font-medium text-gray-200">0</span>
                </div>

                <div class="glass rounded-xl p-4 flex flex-col items-center justify-center">
                    <span class="text-gray-500 text-[10px] uppercase mb-1 font-bold tracking-wider">Total Seconds</span>
                    <span id="total-seconds" class="text-xl font-mono font-medium text-gray-200">0</span>
                </div>

            </div>
        </div>

        <!-- Settings Area -->
        <div class="glass rounded-2xl p-6 max-w-lg mx-auto mt-8">
            <h3 class="text-lg font-semibold mb-4 text-center text-gray-300">Set New Start Date</h3>
            
            <div class="flex flex-col gap-4">
                <input type="datetime-local" id="date-input" class="w-full p-3 rounded-lg bg-gray-900/50 border border-gray-700 text-white focus:outline-none focus:border-gray-500 transition font-mono text-sm">
                
                <div class="flex gap-3">
                    <button onclick="saveNewDate()" class="flex-1 bg-white hover:bg-gray-200 text-black font-semibold py-2 px-4 rounded-lg transition text-sm">
                        <i class="fas fa-save mr-2"></i> Save
                    </button>
                    <button onclick="resetToDefault()" class="bg-gray-800 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition text-sm" title="Reset to default">
                        <i class="fas fa-undo"></i>
                    </button>
                </div>
                <p id="status-msg" class="text-center text-xs mt-2 h-5 text-gray-400 font-medium"></p>
            </div>
        </div>

    </div>

    <script>
        // DEFAULT CONFIGURATION
        // December 11, 2025, 3:00 PM
        const DEFAULT_DATE = new Date(2025, 11, 11, 15, 0, 0); 

        let startDate;
        let timerInterval;

        // DOM Elements
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        const totalDaysEl = document.getElementById('total-days');
        const totalHoursEl = document.getElementById('total-hours');
        const totalMinutesEl = document.getElementById('total-minutes');
        const totalSecondsEl = document.getElementById('total-seconds');

        const dateDisplayEl = document.getElementById('current-start-date');
        const dateInput = document.getElementById('date-input');
        const statusMsg = document.getElementById('status-msg');

        // Initialization
        function init() {
            loadDate();
            startTimer();
            
            // Set input to current local time
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            dateInput.value = now.toISOString().slice(0, 16);
        }

        // Load date from LocalStorage or use Default
        function loadDate() {
            const savedDate = localStorage.getItem('myTimerStartDate');
            
            if (savedDate) {
                startDate = new Date(savedDate);
            } else {
                startDate = DEFAULT_DATE;
            }

            // Display current reference date
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            dateDisplayEl.textContent = startDate.toLocaleDateString('en-US', options);
        }

        // Timer Logic
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);

            function update() {
                const now = new Date();
                let diff = now - startDate;

                // Time constants
                const msPerSecond = 1000;
                const msPerMinute = 60 * 1000;
                const msPerHour = 60 * 60 * 1000;
                const msPerDay = 24 * 60 * 60 * 1000;

                // --- 1. MAIN TIMER CALCULATION (Breakdown) ---
                const diffAbs = diff; 

                const days = Math.floor(diffAbs / msPerDay);
                const hours = Math.floor((diffAbs % msPerDay) / msPerHour);
                const minutes = Math.floor((diffAbs % msPerHour) / msPerMinute);
                const seconds = Math.floor((diffAbs % msPerMinute) / msPerSecond);

                daysEl.innerText = days;
                hoursEl.innerText = Math.abs(hours) < 10 ? '0' + Math.abs(hours) : Math.abs(hours);
                minutesEl.innerText = Math.abs(minutes) < 10 ? '0' + Math.abs(minutes) : Math.abs(minutes);
                secondsEl.innerText = Math.abs(seconds) < 10 ? '0' + Math.abs(seconds) : Math.abs(seconds);

                // --- 2. TOTAL STATS CALCULATION (Cumulative) ---
                const tDays = Math.floor(diffAbs / msPerDay);
                const tHours = Math.floor(diffAbs / msPerHour);
                const tMinutes = Math.floor(diffAbs / msPerMinute);
                const tSeconds = Math.floor(diffAbs / msPerSecond);

                // Use en-US locale for comma separators (e.g., 1,000)
                totalDaysEl.innerText = tDays.toLocaleString('en-US');
                totalHoursEl.innerText = tHours.toLocaleString('en-US');
                totalMinutesEl.innerText = tMinutes.toLocaleString('en-US');
                totalSecondsEl.innerText = tSeconds.toLocaleString('en-US');
            }

            update(); 
            timerInterval = setInterval(update, 1000); 
        }

        // Save new date
        function saveNewDate() {
            const val = dateInput.value;
            if (!val) return;

            const newDate = new Date(val);
            
            if (isNaN(newDate.getTime())) {
                statusMsg.textContent = "Invalid date!";
                statusMsg.className = "text-center text-xs mt-2 h-5 text-red-400 font-medium";
                return;
            }

            localStorage.setItem('myTimerStartDate', newDate.toISOString());
            loadDate();
            startTimer();

            statusMsg.textContent = "Date saved successfully!";
            statusMsg.className = "text-center text-xs mt-2 h-5 text-green-400 font-medium";
            setTimeout(() => { statusMsg.textContent = ""; }, 3000);
        }

        // Reset to Default
        function resetToDefault() {
            localStorage.removeItem('myTimerStartDate');
            loadDate();
            startTimer();
            statusMsg.textContent = "Reset to default date.";
            statusMsg.className = "text-center text-xs mt-2 h-5 text-yellow-400 font-medium";
            setTimeout(() => { statusMsg.textContent = ""; }, 3000);
        }

        init();
    </script>
</body>
</html>
